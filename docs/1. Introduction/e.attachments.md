# Attachments

<!-- theme: warning -->
> This functionality is not yet available in our API

Typically the POS uploads an electronic receipt after the payment has been confirmed.
By the Merchant Agreement, the Merchant is required to provide purchase information to the user. This is done by uploading either Receipts or ItemLists to an attachment URI.

## How to upload

Attachment URIs are generated by Settle and are given in the attachment_uri field in the JSON response on a certain endpoint. At the moment only the outcome endpoint for payment requests exposes such a field.

When an attachment URI has been acquired, any number of files can be uploaded by making a POST request formatted as multipart/form-data. This format is described in RFC 2388. Libraries able to make multipart/form-data HTTP requests are readily available for most programming languages.

> #### Note
>
> Each upload is *"all or nothing"*. This means that if one or more files fails in a multi-file upload (e.g. due to failed server-side format validation), the entire upload will be discarded by Settle.

## Supported mime-types

Settle validates uploaded data according to the Content-Type of the part in the request.

The supported MIME-types and their respective schemas are:

`application/vnd.mcash.itemlist.v1+json`

```json json_schema
{
  "title": "Attachments",
  "type": "object",
  "properties": {
    "store_name": {
      "type": "string",
      "description": "Information about the store."
    },
    "organization_number": {
      "type": "string",
      "description": "Organization number, e.g. 987654321."
    },
    "items": {
      "$ref": "/models/Item.yaml"
    },
    "cashier": {
      "type": "string",
      "description": "Seller ID or seller name."
    },
    "register": {
      "type": "string",
      "description": "Cash register/POS identifier."
    },
    "store": {
      "$ref": "/models/Store.yaml"
    },
    "receipt_items": {
      "$ref": "/models/ReceiptItems.yaml"
    },
    "payments": {
      "$ref": "/models/ReceiptPayments.yaml"
    },
    "currency": {
      "$ref": "/models/Currency.v1.yaml"
    },
    "gross": {
      "type": "string",
      "description": "Gross amount before discounts."
    },
    "discount": {
      "type": "string",
      "description": "Discount on the gross."
    },
    "net": {
      "type": "string",
      "description": "Cash register/POS identifier."
    },
    "image/png": {
      "description": "gross - discount."
    },
  }
}
```
